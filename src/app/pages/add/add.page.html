<ion-header>
    <ion-toolbar color="{{addToFavorites? 'secondary' : 'dark'}}">
        <ion-buttons slot="start">
            <ion-back-button
                    routerLink="{{ addToFavorites ? '/tabs/favorites' : '/settings/blacklist'}}"></ion-back-button>
        </ion-buttons>
        <ion-title>
            {{ addToFavorites ? ("add.ADD_FAVORITE" | translate) : ("add.LOCK_SHUTTLE" | translate) }}
        </ion-title>
    </ion-toolbar>
    <ion-searchbar [showCancelButton]="false" (ionInput)="getQueryResult($event)"
                   placeholder="{{ 'add.NAME_OR_PHONE' | translate }}" animated="true">
    </ion-searchbar>
</ion-header>

<ion-content>
    <ng-template *ngIf="queryResult && queryResult.length > 0 Else noData"></ng-template>
    <ion-virtual-scroll [items]="queryResult">
        <ion-item *virtualItem="let shuttle" lines="full">
            <ion-thumbnail slot="start" *ngIf="shuttle">
                <app-sf-shuttle-icon [colors]="colorGenerator.getShuttleColors(shuttle)">
                </app-sf-shuttle-icon>
            </ion-thumbnail>
            <ion-label text-wrap>
                <ion-text>
                    <h2>{{ shuttle?.name }}</h2>
                    <p>{{ sfDb.getFormattedPhoneNumber(shuttle?.phone) }}</p>

                </ion-text>
            </ion-label>
            <ng-container *ngIf="!isInList(shuttle)">
                <ion-button (click)="addToList(shuttle)"
                            color="{{addToFavorites? 'success' : 'dark'}}"
                            slot="end" shape="round" size="small">
                    {{addToFavorites ? 'Add' : 'Block'}}
                    <ion-icon name="{{addToFavorites? 'heart' : 'remove-circle'}}" slot="end"></ion-icon>
                </ion-button>
            </ng-container>
            <ng-container *ngIf="isInList(shuttle)">
                <ion-button (click)="removeFromList(shuttle)"
                            color="{{addToFavorites? 'danger' : 'success'}}"
                            slot="end" shape="round" size="small">
                    {{addToFavorites ? 'Remove' : 'Unblock'}}
                    <ion-icon name="{{addToFavorites? 'trash' : 'checkmark-circle'}}" slot="end"></ion-icon>
                </ion-button>
            </ng-container>
        </ion-item>
    </ion-virtual-scroll>

    <ng-template #noData>
        <p class="no-data-p">{{ ("add.NO_RESULT" | translate) }}</p>
    </ng-template>

    <!--<div *ngIf="allShuttles?.length < 1">-->
    <!--<ion-spinner *ngIf="!noConnection && !unavailable" color="grey" name="crescent"></ion-spinner>-->
    <!--<div *ngIf="noConnection">-->
    <!--<p class="no-data-p ">{{ "NO_CONNECTION" | translate }}</p>-->
    <!--</div>-->
    <!--<div *ngIf="unavailable">-->
    <!--&lt;!&ndash; <p class="no-data-p ">{{ "NOT_AVAILABLE" | translate }}</p> &ndash;&gt;-->
    <!--</div>-->
    <!--</div>-->
</ion-content>
